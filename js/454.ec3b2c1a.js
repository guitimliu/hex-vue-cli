"use strict";(self["webpackChunkhex_vue_cli"]=self["webpackChunkhex_vue_cli"]||[]).push([[454],{331:function(a,e,t){t.d(e,{Z:function(){return g}});var l=t(252),s=t(577);const n={"aria-label":"Page navigation example"},d={class:"pagination"},r={key:0,class:"page-item"},o={key:0,class:"page-item"},i=["onClick"],c={key:1,class:"page-item disabled"},u=["onClick"],p={key:1,class:"page-item"};function _(a,e,t,_,b,m){return(0,l.wg)(),(0,l.iD)("nav",n,[(0,l._)("ul",d,[t.data?.has_pre?((0,l.wg)(),(0,l.iD)("li",r,[(0,l._)("button",{type:"button",class:"page-link",onClick:e[0]||(e[0]=a=>m.changePage(t.data?.current_page-1))}," 上一頁 ")])):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.data?.total_pages,(a=>((0,l.wg)(),(0,l.iD)(l.HY,{key:a},[a!=t.data?.current_page?((0,l.wg)(),(0,l.iD)("li",o,[(0,l._)("button",{type:"button",class:"page-link",onClick:e=>m.changePage(a)},(0,s.zw)(a),9,i)])):((0,l.wg)(),(0,l.iD)("li",c,[(0,l._)("button",{type:"button",class:"page-link",onClick:e=>m.changePage(a)},(0,s.zw)(a),9,u)]))],64)))),128)),t.data?.has_next?((0,l.wg)(),(0,l.iD)("li",p,[(0,l._)("button",{type:"button",class:"page-link",onClick:e[1]||(e[1]=a=>m.changePage(t.data?.current_page+1))}," 下一頁 ")])):(0,l.kq)("",!0)])])}var b={methods:{changePage(a){this.$emit("return-page",a)}},props:["data"]},m=t(744);const h=(0,m.Z)(b,[["render",_]]);var g=h},454:function(a,e,t){t.r(e),t.d(e,{default:function(){return ia}});var l=t(252),s=t(577);const n=a=>((0,l.dD)("data-v-f66f7930"),a=a(),(0,l.Cn)(),a),d=n((()=>(0,l._)("h1",{class:"h3"},"訂單列表",-1))),r={class:"table table-hover table-striped table-borderless shadow","data-aos":"zoom-in"},o=n((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{class:"percenTwenly"},"訂單 ID"),(0,l._)("th",{class:"percenTwenly"},"訂購人"),(0,l._)("th",{class:"percenTwenly"},"訂單時間"),(0,l._)("th",{class:"percenTwenly"},"價格"),(0,l._)("th",{class:"percenTwenly"},"查看細節")])],-1))),i=["onClick"],c=["onClick"];function u(a,e,t,n,u,p){const _=(0,l.up)("Pagination"),b=(0,l.up)("deleteOrder"),m=(0,l.up)("updateOrder");return(0,l.wg)(),(0,l.iD)(l.HY,null,[d,(0,l._)("table",r,[o,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(u.orders,(a=>((0,l.wg)(),(0,l.iD)("tr",{key:a},[(0,l._)("td",null,[(0,l._)("button",{type:"button",class:(0,s.C_)(["btn",{"btn-success":a.is_paid,"btn-danger":!a.is_paid}])},(0,s.zw)(a.id),3)]),(0,l._)("td",null,(0,s.zw)(a.user.name),1),(0,l._)("td",null,(0,s.zw)(a.create_at),1),(0,l._)("td",null,(0,s.zw)(a.total),1),(0,l._)("td",null,[(0,l._)("button",{type:"button",onClick:e=>u.temp={...a},class:"btn btn-secondary","data-bs-toggle":"modal","data-bs-target":"#orderDetail"}," 查看 ",8,i),(0,l._)("button",{type:"button",class:"btn btn-danger ms-2",onClick:e=>u.temp={...a},"data-bs-toggle":"modal","data-bs-target":"#deleteModal"},"刪除",8,c)])])))),128))])]),(0,l.Wm)(_,{data:u.pagination,onReturnPage:p.getOrders},null,8,["data","onReturnPage"]),(0,l.Wm)(b,{data:u.temp,onRenderOrders:p.getOrders},null,8,["data","onRenderOrders"]),(0,l.Wm)(m,{data:u.temp,onRenderProducts:p.getOrders},null,8,["data","onRenderProducts"])],64)}var p=t(669),_=t.n(p),b=t(810),m=t(331);const h={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},g={class:"modal-dialog"},w={class:"modal-content"},y=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"exampleModalLabel"},"刪除訂單")],-1),D={class:"modal-body"},v=(0,l.Uk)("確定刪除 "),k={class:"text-danger"},f=(0,l.Uk)(" 訂單？"),C={class:"modal-footer"},x=(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal","aria-label":"Close"},"取消",-1);function O(a,e,t,n,d,r){return(0,l.wg)(),(0,l.iD)("div",h,[(0,l._)("div",g,[(0,l._)("div",w,[y,(0,l._)("div",D,[(0,l._)("p",null,[v,(0,l._)("span",k,(0,s.zw)(t.data?.id),1),f])]),(0,l._)("div",C,[x,(0,l._)("button",{onClick:e[0]||(e[0]=(...a)=>r.deleteOrder&&r.deleteOrder(...a)),"data-bs-dismiss":"modal",type:"button",class:"btn btn-danger"},"刪除")])])])])}var z={methods:{renderOrders(){this.$emit("render-orders")},deleteOrder(){_()["delete"](`https://vue3-course-api.hexschool.io/v2/api/guitimliu/admin/order/${this.data.id}`).then((()=>{alert("已成功刪除訂單"),this.renderOrders()})).catch((()=>{}))}},props:["data"]},P=t(744);const T=(0,P.Z)(z,[["render",O]]);var M=T,U=t(963);const Z=a=>((0,l.dD)("data-v-691099d2"),a=a(),(0,l.Cn)(),a),R={class:"modal fade",id:"orderDetail",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},$={class:"modal-dialog"},H={class:"modal-content"},V={class:"modal-header"},Y=Z((()=>(0,l._)("h5",null,"訂單細項",-1))),q={class:"ms-2"},I=Z((()=>(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))),K={class:"modal-body"},L={class:"list-unstyled"},W={class:"py-1"},A=Z((()=>(0,l._)("label",{for:"purchaserName",class:"form-label"}," 購買人姓名 ",-1))),E={class:"py-1"},N=Z((()=>(0,l._)("label",{for:"purchaserTel",class:"form-label"}," 購買人電話 ",-1))),j={class:"py-1"},B=Z((()=>(0,l._)("label",{for:"purchaserEmail",class:"form-label"}," 購買人信箱 ",-1))),F={class:"py-1"},G=Z((()=>(0,l._)("label",{for:"purchaserAddress",class:"form-label"}," 購買人地址 ",-1))),J={class:"py-1"},Q={class:"table table-hover table-striped table-borderless shadow","data-aos":"zoom-in"},S=Z((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{class:"percenTwenly"},"商品名稱"),(0,l._)("th",{class:"percenTwenly"},"商品分類"),(0,l._)("th",{class:"percenTwenly"},"商品單價"),(0,l._)("th",{class:"percenTwenly"},"購買數量"),(0,l._)("th",{class:"percenTwenly"},"商品總價")])],-1))),X={class:"text-end py-1"},aa={class:"py-1"},ea=Z((()=>(0,l._)("label",{for:"orderMessage",class:"form-label"}," 留言 ",-1))),ta={class:"text-end py-3"};function la(a,e,t,n,d,r){return(0,l.wg)(),(0,l.iD)("div",R,[(0,l._)("div",$,[(0,l._)("div",H,[(0,l._)("div",V,[Y,(0,l._)("div",q,[d.newData.is_paid?((0,l.wg)(),(0,l.iD)("button",{key:0,onClick:e[0]||(e[0]=a=>d.newData.is_paid=!d.newData.is_paid),class:"btn btn-success"},"啟用")):((0,l.wg)(),(0,l.iD)("button",{key:1,onClick:e[1]||(e[1]=a=>d.newData.is_paid=!d.newData.is_paid),class:"btn btn-danger"},"未啟用"))]),I]),(0,l._)("div",K,[(0,l._)("ul",L,[(0,l._)("li",W,[A,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"purchaserName","onUpdate:modelValue":e[2]||(e[2]=a=>d.newData.user.name=a)},null,512),[[U.nr,d.newData.user.name]])]),(0,l._)("li",E,[N,(0,l.wy)((0,l._)("input",{type:"tel",class:"form-control",id:"purchaserTel","onUpdate:modelValue":e[3]||(e[3]=a=>d.newData.user.tel=a)},null,512),[[U.nr,d.newData.user.tel]])]),(0,l._)("li",j,[B,(0,l.wy)((0,l._)("input",{type:"tel",class:"form-control",id:"purchaserEmail","onUpdate:modelValue":e[4]||(e[4]=a=>d.newData.user.email=a)},null,512),[[U.nr,d.newData.user.email]])]),(0,l._)("li",F,[G,(0,l.wy)((0,l._)("input",{type:"tel",class:"form-control",id:"purchaserAddress","onUpdate:modelValue":e[5]||(e[5]=a=>d.newData.user.address=a)},null,512),[[U.nr,d.newData.user.address]])]),(0,l._)("li",J,[(0,l._)("table",Q,[S,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.newData.products,((a,e)=>((0,l.wg)(),(0,l.iD)("tr",{key:e},[(0,l._)("td",null,(0,s.zw)(a.product.title),1),(0,l._)("td",null,(0,s.zw)(a.product.category),1),(0,l._)("td",null,(0,s.zw)(a.product.price),1),(0,l._)("td",null,(0,s.zw)(a.qty),1),(0,l._)("td",null,(0,s.zw)(a.total),1)])))),128))])])]),(0,l._)("li",X," 總金額："+(0,s.zw)(d.newData.total),1),(0,l._)("li",aa,[ea,(0,l.wy)((0,l._)("textarea",{type:"text",class:"form-control",id:"orderMessage","onUpdate:modelValue":e[6]||(e[6]=a=>d.newData.message=a),rows:"3"},null,512),[[U.nr,d.newData.message]])]),(0,l._)("li",ta,[(0,l._)("button",{onClick:e[7]||(e[7]=(...a)=>r.pushData&&r.pushData(...a)),"data-bs-dismiss":"modal",type:"button",class:"btn btn-success rounded-2 w-25 ms-2"},"送出")])])])])])])}var sa={data(){return{newData:{user:{}}}},props:["data"],watch:{data(){this.newData=this.data,this.setOriginPrice=this.newData.origin_price!==this.newData.price}},methods:{pushData(){console.log(this.newData.id),_().put(`https://vue3-course-api.hexschool.io/v2/api/guitimliu/admin/order/${this.newData.id}`,{data:this.newData}).then((a=>{alert(a.data.message),this.$emit("render-products")})).catch((()=>{alert("資料有誤")}))}}};const na=(0,P.Z)(sa,[["render",la],["__scopeId","data-v-691099d2"]]);var da=na,ra={components:{Pagination:m.Z,deleteOrder:M,updateOrder:da},data(){return{orders:null,pagination:null,temp:null}},methods:{getOrders(a=1){_().get(`https://vue3-course-api.hexschool.io/v2/api/guitimliu/admin/orders?page=${a}`).then((a=>{this.orders=a.data.orders,this.pagination=a.data.pagination})).catch((a=>{console.dir(a)}))}},mounted(){(0,b.Z)(),this.getOrders()}};const oa=(0,P.Z)(ra,[["render",u],["__scopeId","data-v-f66f7930"]]);var ia=oa}}]);
//# sourceMappingURL=454.ec3b2c1a.js.map